<!-- ---
title: 使用服务器搭建Typecho博客
date: 2019-03-28 20:52:19
categories:
- 随笔
- 博客
tags: 
- 博客
--- -->

**关键词**

- VPS（Virtual Private Server）
- 服务器

- 域名
- ip
- SSH
- 宝塔
- Nginx
- PHP
- MySQl
- typecho博客
- SSL、HTTPS
- Markdown

- hexo博客
- Github

<!--more-->

# 博客搭建

从技术角度讲，博客无非就是一个web页面，既然是web，那么两样东西必不可少：服务器与html

- 第三方平台

- ***服务器搭建***
- ***基于免费云空间搭建静态网页***

# 第三方平台

- `csdn`
- `博客园`：[我的博客园](https://www.cnblogs.com/huangtc/)
- 简书
- 其它

# 服务器搭建

## 了解下 VPS

***虚拟专用服务器***（英语：Virtual private server，缩写为`VPS`），是将一台[服务器](https://zh.wikipedia.org/wiki/%E6%9C%8D%E5%8A%A1%E5%99%A8)分割成多个虚拟专享服务器的服务。实现`VPS`的技术分为容器技术和[虚拟机](https://zh.wikipedia.org/wiki/%E8%99%9A%E6%8B%9F%E6%9C%BA)技术 。在容器或虚拟机中，每个`VPS`都可分配独立公网[IP地址](https://zh.wikipedia.org/wiki/IP%E5%9C%B0%E5%9D%80)、独立[操作系统](https://zh.wikipedia.org/wiki/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F)、实现不同`VPS`间磁盘空间、[内存](https://zh.wikipedia.org/wiki/%E5%86%85%E5%AD%98)、[CPU](https://zh.wikipedia.org/wiki/CPU)资源、进程和系统配置的隔离，为用户和[应用程序](https://zh.wikipedia.org/wiki/%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F)模拟出“独占”使用计算资源的体验。`VPS`可以像独立服务器一样，重装操作系统，安装程序，单独重启服务器。

## 准备

- 服务器和域名

1. 服务器选择

   >对于服务器选择，一般分为国内服务器和国外服务器，大致区别如下：
   >
   >- 国内服务器需要域名备案才能使用，缺点是价格贵(学生机会便宜些)，带宽低；优点是国内访问很稳定，同时也可以使用国内CDN加速。
   >- 国外服务器不需要域名备案，缺点是网络可能会经常波动；优点大概是比国内便宜，带宽足。
   >- 香港服务器也是不需要备案的，访问速度和国内差不多，如果不想备案，可以直接选择香港服务器。

   注意：国内域名注册购买的时候就需要需要实名认证，如果要将域名解析到服务器的`ip`需要备案

   我买的是阿里云香港轻量服务器，界面如下：

   ![轻量服务器控制台界面](https://i.loli.net/2019/03/18/5c8fb83d53040.jpg)

2. 域名

   >注册的话，国内的可以选择阿里云、腾讯云，需要实名；不想实名的直接选择国外[Namesilo](https://www.namesilo.com/?rid=251f960qe) 等注册商, 
   >
   >在[Namesilo](https://www.namesilo.com/?rid=251f960qe) 注册可以参考[注册购买域名的教程](https://zhuanlan.zhihu.com/p/25627048)

3. 域名解析 

准备好了域名后，先去域名商后台，找到`DNS`(解析)设置，解析域名的`A`记录到服务器的`ip`地址。

一般而言，我们在购买域名之后，不管是`Namesilo`域名注册商，还是其他注册商，直接面对的问题就是域名解析。域名解析分两种方法，一种就是直接利用域名自由的解析`A记录`或者`CNAME`别名解析，一种就是更换`DNS`直接用第三方`DNS`解析

```
#提示：这里可以解析主域名，比如huangtiancai.xyz，也可以解析二级域名，比如ty.huangtiancai.xyz、xx.huangtiancai.xyz。解析的是什么域名，到时候就使用什么域名。
```

注意：<a href="#锚点1">域名解析详见文末</a>

## 安装

先去`VPS`服务器后台，重装个服务器，这里建议选择`CentOS 7`系统。

然后使用`SSH`客户端(比如`Xshell`)登录`VPS`，使用命令：

```
#CentOS系统:我的服务器安装的是Centos7.3
wget -O install.sh http://download.bt.cn/install/install_6.0.sh && sh install.sh
```

安装完成后会直接在`SSH`客户端显示后台信息。

![](https://i.loli.net/2019/03/28/5c9cdda880e4d.png)

````
提示：如果我们后续未修改密码却忘记了密码的话，可以在SSH客户端使用命令bt default来查看安装后的默认后台信息。
````

然后登陆后台，这时候宝塔会提示让我们选择环境::

![](https://i.loli.net/2019/03/28/5c9cde3ca4a7b.png)

这里建议选择`LNMP`，环境为`Nginx 1.15`、`PHP 7.2`、`Mysql 5.5`，如果内存`1G`建议选择`Mysql 5.6`、`2G`选择`5.7`。选择好了后点击一键安装即可。

安装环境的时候等待时间可能会有点长，可以点击左上角红色的消息盒子查看进度，也可以通过左侧软件管理查看进度。

![](https://i.loli.net/2019/03/28/5c9cdf3a66af7.png)

安装完成后，点击左侧软件管理-宝塔插件，安装`宝塔一键部署源码`，装好后点击设置。

![](https://i.loli.net/2019/03/28/5c9cdf3ad4ce6.png)

然后选择博客一栏，会出现一些常用的博客程序。

![](https://i.loli.net/2019/03/28/5c9cdf184a89c.png)

根据自己的喜好选择一个博客程序，然后点击`一键部署`

```
#关于程序选择，这里建议首选Wordpress或者Typecho，大致区别如下：
Wordpress：使用人数全球最多，插件、模板都多，可定制性强，不过收费主题都有点贵。
Typecho：也就是博主现在使用的程序，轻巧，后台简洁，挺适合做个人博客，但搞其它的就不适合了。
```

然后会要你填入域名，也就是你解析到这个服务器`ip`的域名。

提交后，初步算安装完成了，然后记住给你的数据库名、用户名和密码。

再点击左侧的网站，找到你的域名，点击设置。

再点击伪静态，选择自己所安装的程序名称，比如`Typecho`，再点击保存即可。

![](https://i.loli.net/2019/03/28/5c9cdf2577c02.png)

然后打开你的域名，填入数据库信息，管理员信息安装即可。

我使用的主题是：

Mirages主题：https://get233.com/archives/mirages-intro.html



# 基于免费云空间搭建静态网页

详见：[使用hexo-github搭建免费个人博客]()





<a name="锚点1">域名解析</a>

一般而言，我们在购买域名之后，不管是`Namesilo`域名注册商，还是其他注册商，直接面对的问题就是域名解析。域名解析分两种方法，一种就是直接利用域名自由的解析`A记录`或者`CNAME`别名解析，一种就是更换`DNS`直接用第三方`DNS`解析

注意：

- 在不同的域名注册商注册到的域名之后可以更换`DNS`直接用第三方`DNS`解析，然后都用统一的第三方`DNS`管理域名,我是在[Namesilo](https://www.namesilo.com/?rid=251f960qe) 注册，我用的是阿里云（比较方便管理）`DNS`解析

- `IP`和域名绑定有两种情况：带`www`和不带`www`的

- 域名配置最常见有2种方式，`CNAME`和`A记录`，`CNAME`填写`域名`，`A记录`填写`IP`

  

相关:

**域名后缀**

> 域名后缀，亦被称为顶级域名，是指代表一个域名类型的符号。 不同后缀的域名有不同的含义。目前域名共分为两类：国别域名，例如中国的`.cn`、美国的`.us`、俄罗斯的`.ru`、以及国际通用域名，例如`.com`、`.xyz`、`.top`、.`wang`、`pub`、`.xin`、.net`等1000多种，所有域名后缀作用无差异，仅外观和本身含义不同，但只有少数例如举例中的域名后缀可以在国内支持网站的备案 .

国际域名-国际顶级域名

常用后缀:`com`    `org`  `gov`  `edu` `tech`  `net`   `xyz`  `top`等等

**国内域名**

>`cn`: 中国国家顶级域名
>`com.cn` 中国公司和商业组织域名
>`net.cn` 中国网络服务机构域名
>`gov.cn` 中国政府机构域名
>`org.cn` 中国非盈利组织域名

**国别域名**

>[国别域名](https://baike.baidu.com/item/%E5%9B%BD%E5%88%AB%E5%9F%9F%E5%90%8D)只能是由两个英文字母所组成，比如：代表中国大陆的是`.cn` ,代表美国的是`.us` ，代表欧盟的是`.eu` 等等
>
>注意:照严格意义来说，国别域名现在已经超出了“国家”的范畴，根据 `ICANN`(互联网名称与数字地址分配机构)已经开放的249个国别域名后缀显示，除**“国家”**以外，还有许多的**“地区”**拥有自己的**“国别域名”**。
>
>因此，现在的国别域名包含了如下的几层意思：
>
>1. 主权国家的域名后缀，例如` .cn`(中国大陆) `.us`(美国) `.de`(德国) `.uk`(英国) `.fr`(法国) 等等;
>
>2. 国家共同体的域名后缀，例如 `.eu`(欧盟)
>
>3. 主权国家特别区域的域名后缀，例如 `.hk`(香港) .mo(澳门) `.tw`(台湾) `.gi`([直布罗陀](https://baike.baidu.com/item/%E7%9B%B4%E5%B8%83%E7%BD%97%E9%99%80))等等;
>
>4. 主权国家的[海外领土](https://baike.baidu.com/item/%E6%B5%B7%E5%A4%96%E9%A2%86%E5%9C%9F)的域名后缀，通常是一些偏远小岛，例如 `.im`(英属人岛) `.as`(美属[萨摩亚](https://baike.baidu.com/item/%E8%90%A8%E6%91%A9%E4%BA%9A)) `.gf`(法属[圭亚那](https://baike.baidu.com/item/%E5%9C%AD%E4%BA%9A%E9%82%A3))等等;

4.